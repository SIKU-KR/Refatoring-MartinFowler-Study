# Chapter 3. 코드에서 나는 악취 (Code Smells)

리팩터링을 언제 시작하고 언제 그만할지를 판단하는 일은 리팩터링의 작동 원리를 아는 것 못지않게 중요하다.

이 책의 공동저자인 켄트 벡은 리팩터링할 '시점'을 설명하는 데 '**냄새(smell)**'이라는 표현을 사용했다.

### 1. 기이한 이름

코드를 명료하게 표현하는 데 가장 중요한 요소는 **이름**이다. 좋은 코드는 이름만 보고도 각각이 무슨 일을 하고 어떻게 사용해야 하는지 명확히 알 수 있도록 엄청나게 신경 써서 이름을 지어야한다.

- **함수 선언 바꾸기**
- **변수 이름 바꾸기**
- **필드 이름 바꾸기**

### 2. 중복 코드

똑같은 코드 구조가 여러 곳에서 반복된다면 하나로 통합하여 더 나은 프로그램을 만들 수 있다.

- **함수 추출하기**: 양쪽 모두 추출된 메서드를 사용
- **문장 슬라이스하기**: 비슷한 부분을 한 곳에 모아 함수 추출하기를 더 쉽게 적용할 수 있는지 봄
- **메서드 올리기**: 같은 부모로부터 파생된 서브클래스들에 코드가 중복되어 있는 경우 부모로 코드를 옮김

### 3. 긴 함수

오랜 기간 잘 활용되는 프로그램들은 하나같이 짧은 함수로 구성된다.

**간접 호출(indirection)**의 효과, 코드를 이해하고 공유하고 선택하기 쉬워진다는 장점은 함수를 짧게 구성할 때 가능하다.

짧은 함수로 구성된 코드를 이해하기 쉽게 만드는 가장 확실한 방법은 **좋은 이름**이다. 함수 이름을 잘 지어두면 본문 코드를 볼 이유가 사라진다.

- **함수 추출하기**
- 매개변수와 임시변수는 코드를 이해하기 어렵게 만든다.
  - **임시 변수를 질의 함수로 바꾸기**: 임시 변수의 수를 줄인다
  - **매개변수 객체 만들기**, **객체 통째로 넘기기**: 매개 변수의 수를 줄인다
- **함수를 명령으로 바꾸기**: 매개변수와 임시변수가 너무 많을 때
- **조건문 분해하기**
- **조건부 로직을 다형성으로 바꾸기**
- **반복문 쪼개기**

